AWSTemplateFormatVersion: '2010-09-09'
Parameters:
  SNSTopicName:
    Description: Name for the SNS topic
    Type: String
  SNSDisplayName:
    Description: Display name for the SNS topic
    Type: String
  SNSEmail:
    Description: Email address for SNS subscription
    Type: String
  ArtifactName:
    Description: Name of the current CodePipeline artifact
    Type: String

Resources:
  ArtifactBucketName:
    Type: AWS::SSM::Parameter::Value<String>
    Default: '/CodePipeline/ArtifactStoreBucket'

  SNSStack:
      Type: AWS::CloudFormation::Stack
      Properties:
        TemplateURL: !Sub 'https://${ArtifactBucketName}.s3.amazonaws.com/Patching/SourceArti/${ArtifactName}/SNSForPatchingCloudFormation.yml'
        Parameters:
          SNSTopicName: !Ref SNSTopicName
          SNSDisplayName: !Ref SNSDisplayName
          SNSEmail: !Ref SNSEmail